debug: true
cluster:

  network:
    cni:
      name: none

  proxy:
    disabled: true

  apiServer:
    admissionControl:
      - name: PodSecurity
        configuration:
          defaults:
            enforce: privileged

  allowSchedulingOnControlPlanes: true

machine:
  kubelet:
    extraMounts:
      - destination: /var/local-path-provisioner
        type: bind
        source: /var/local-path-provisioner
        options:
          - bind
          - rshared
          - rw

#OP_TOKEN=$(op document get "op.nhlabs.org-token")
#OP_DOCUMENT=$(op document get "op.nhlabs.org-credentials" | base64)
#cat << EOF > test.yaml
#---
#apiVersion: v1
#kind: Secret
#metadata:
#  name: op-credentials
#  namespace: connect
#type: Opaque
#stringData:
#  1password-credentials.json: |-
#    ${OP_DOCUMENT}
#---
#apiVersion: v1
#kind: Secret
#metadata:
#  name: onepassword-token
#  namespace: connect
#type: Opaque
#stringData:
#  token: ${OP_TOKEN}
#EOF
